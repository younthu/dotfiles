# Aliyun gemsource
source 'http://mirrors.aliyun.com/rubygems/'

# Add column to table
class AddEmailToUsers < ActiveRecord::Migration[5.0]
  def change
    add_column :users, :email, :string
  end
end

# roll back migration
rake db:rollback STEP=1

# run ruby code in rails env
rails runner "User.create!(email: 'test@ruby.com', password: 'password')"

# 创建API项目, 跳过测试(-T), 用postgresql做数据库(-d)
Rails new my-app-api --api -T -d postgresql

# 可以用runner直接跑console里面的脚本
rails runner -e development 'Platform::Procedure.where("created_at > ?", 1.day.ago).destroy_all'
